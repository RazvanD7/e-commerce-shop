import{a as D}from"./chunk-USJXSOQJ.js";import{a as _e}from"./chunk-CLJG6TC6.js";import{Aa as N,Ba as oe,Cb as ge,D as d,Db as he,E as u,Fb as fe,Ga as E,H as Y,Ha as B,Ma as re,Na as y,P as O,Q as a,Sa as z,Ta as ae,U as _,V as h,W as M,Za as se,Zb as ve,_ as g,_a as pe,ba as c,d as J,da as L,fa as o,ga as r,h as w,ha as S,hb as ce,ia as Z,j as K,ja as ee,k,kb as me,la as b,mb as $,na as l,oa as m,pb as le,ra as P,sa as Q,sb as de,ua as te,va as ie,w as W,wa as ne,wb as ue,x as T,ya as s,z as X,za as f}from"./chunk-UDTUQTR4.js";var x=class{bandId=0;typeId=0;sort="name";pageNumber=1;pageSize=12;search};var V=class{pageIndex;pageSize;count;data=[]};var I=class i{constructor(t){this.http=t}baseUrl=le.apiUrl;products=[];brands=[];types=[];pagination=new V;shopParams=new x;getProducts(t){if(t===!1&&(this.products=[]),this.products.length>0&&t===!0){let n=Math.ceil(this.products.length/this.shopParams.pageSize);if(this.shopParams.pageNumber<=n)return this.pagination.data=this.products.slice((this.shopParams.pageNumber-1)*this.shopParams.pageSize,this.shopParams.pageNumber*this.shopParams.pageSize),w(this.pagination)}let e=new se;return this.shopParams.bandId!==0&&(e=e.append("bandId",this.shopParams.bandId.toString())),this.shopParams.typeId!==0&&(e=e.append("typeId",this.shopParams.typeId.toString())),this.shopParams.search&&(e=e.append("search",this.shopParams.search)),e=e.append("sort",this.shopParams.sort),e=e.append("pageIndex",this.shopParams.pageNumber.toString()),e=e.append("pageIndex",this.shopParams.pageSize.toString()),this.http.get(this.baseUrl+"products",{observe:"response",params:e}).pipe(k(n=>(this.products=[...this.products,...n.body.data],this.pagination=n.body,this.pagination)))}getProduct(t){let e=this.products.find(n=>n.id===t);return e?w(e):this.http.get(this.baseUrl+"products/"+t)}setShopParams(t){this.shopParams=t}getShopParams(){return this.shopParams}getBands(){return this.brands.length>0?w(this.brands):this.http.get(this.baseUrl+"products/bands").pipe(k(t=>(this.brands=t,t)))}getTypes(){return this.types.length>0?w(this.types):this.http.get(this.baseUrl+"products/types").pipe(k(t=>(this.types=t,t)))}getAllProductIds(){return J(this,null,function*(){return(yield K(this.http.get(`${this.baseUrl}products/ids`))).map(e=>e.toString())})}static \u0275fac=function(e){return new(e||i)(X(pe))};static \u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})};function Ce(i,t){if(i&1&&(o(0,"span"),s(1,"Showing "),o(2,"strong"),s(3),r(),s(4," of "),o(5,"strong"),s(6),r(),s(7," Results"),r()),i&2){let e=m();a(3),oe(" ",(e.pageNumber-1)*e.pageSize+1," - ",e.pageNumber*e.pageSize>e.totalCount?e.totalCount:e.pageNumber*e.pageSize," "),a(3),f(e.totalCount)}}function Pe(i,t){i&1&&(o(0,"span"),s(1," There are "),o(2,"strong"),s(3,"0"),r(),s(4," results for this filter "),r())}var j=class i{pageNumber;pageSize;totalCount;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},standalone:!1,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(e,n){e&1&&(o(0,"header"),g(1,Ce,8,3,"span",0)(2,Pe,5,0,"span",0),r()),e&2&&(a(),c("ngIf",n.totalCount&&n.totalCount>0),a(),c("ngIf",n.totalCount===0))},dependencies:[y],encapsulation:2})};var R=class i{totalCount;pageSize;pageNumber;pageChanged=new Y;constructor(){}ngOnInit(){}onPagerChange(t){this.pageChanged.emit(t.page)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},standalone:!1,decls:1,vars:4,consts:[["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"pageChanged","boundaryLinks","totalItems","ngModel","itemsPerPage"]],template:function(e,n){e&1&&(o(0,"pagination",0),l("pageChanged",function(v){return n.onPagerChange(v)}),r()),e&2&&c("boundaryLinks",!0)("totalItems",n.totalCount)("ngModel",n.pageNumber)("itemsPerPage",n.pageSize)},dependencies:[fe,de,ue],encapsulation:2})};var H=class i{constructor(t){this.basketService=t}product;ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}static \u0275fac=function(e){return new(e||i)(_(D))};static \u0275cmp=h({type:i,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!1,decls:15,vars:10,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-shopping-cart"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),S(2,"img",2),o(3,"div",3)(4,"button",4),l("click",function(){return n.addItemToBasket()}),S(5,"i",5),r(),o(6,"button",6),s(7," View "),r()()(),o(8,"div",7)(9,"a",8)(10,"h6",9),s(11),r()(),o(12,"span",10),s(13),E(14,"currency"),r()()()),e&2&&(a(2),P("src",n.product.pictureUrl,O),P("alt",n.product.name),a(4),Q("routerLink","/shop/",n.product.id,""),a(3),Q("routerLink","/shop/",n.product.id,""),a(2),f(n.product.name),a(2),f(B(14,8,n.product.price)))},dependencies:[me,z],styles:[".btn[_ngcontent-%COMP%]{height:40px;padding:0 1rem;display:flex;align-items:center;justify-content:center;min-width:80px;line-height:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#ffffff80;opacity:0;transition:all .5s;display:flex;align-items:center;justify-content:center;gap:1.5rem;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]{opacity:1}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-of-type{transform:translate(7px)}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:last-of-type{transform:translate(-7px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transition:all .5s;z-index:1000}"]})};var Oe=["search"];function Me(i,t){if(i&1&&(o(0,"option",17),s(1),r()),i&2){let e=t.$implicit,n=m(2);c("selected",n.shopParams.sort===e.value)("value",e.value),a(),N(" ",e.name," ")}}function Ne(i,t){if(i&1){let e=b();o(0,"li",18),l("click",function(){let p=d(e).$implicit,v=m(2);return u(v.onTypeSelected(p.id))}),s(1),r()}if(i&2){let e=t.$implicit,n=m(2);L("active",e.id===n.shopParams.typeId),c("value",e.id),a(),N(" ",e.name," ")}}function Ee(i,t){if(i&1){let e=b();o(0,"li",18),l("click",function(){let p=d(e).$implicit,v=m(2);return u(v.onBandSelected(p.id))}),s(1),r()}if(i&2){let e=t.$implicit,n=m(2);L("active",e.id===n.shopParams.bandId),c("value",e.id),a(),N(" ",e.name," ")}}function Be(i,t){if(i&1){let e=b();Z(0),o(1,"h5",11),s(2,"Sort"),r(),o(3,"select",12),l("change",function(p){d(e);let v=m();return u(v.onSortSelected(p.target.value))}),g(4,Me,2,3,"option",13),r(),o(5,"h5",14),s(6,"Types"),r(),o(7,"ul",15),g(8,Ne,2,4,"li",16),r(),o(9,"h5",14),s(10,"Bands"),r(),o(11,"ul",15),g(12,Ee,2,4,"li",16),r(),ee()}if(i&2){let e=m();a(4),c("ngForOf",e.sortOptions),a(4),c("ngForOf",e.types),a(4),c("ngForOf",e.bands)}}function ze(i,t){if(i&1){let e=b();o(0,"div",19)(1,"input",20,0),l("keyup.enter",function(){d(e);let p=m();return u(p.onSearch())}),r(),o(3,"button",21),l("click",function(){d(e);let p=m();return u(p.onSearch())}),s(4,"Search"),r(),o(5,"button",22),l("click",function(){d(e);let p=m();return u(p.onReset())}),s(6,"Reset"),r()()}}function De(i,t){if(i&1&&(o(0,"div",23),S(1,"app-product-item",24),r()),i&2){let e=t.$implicit;a(),c("product",e)}}function Ve(i,t){if(i&1){let e=b();o(0,"div",25)(1,"app-pager",26),l("pageChanged",function(p){d(e);let v=m();return u(v.onPageChange(p))}),r()()}if(i&2){let e=m();a(),c("pageSize",e.shopParams.pageSize)("totalCount",e.totalCount)("pageNumber",e.shopParams.pageNumber)}}var A=class i{constructor(t){this.shopService=t;this.shopParams=this.shopService.getShopParams()}searchTerm;products;bands;types;shopParams;totalCount;sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to High",value:"priceAsc"},{name:"Price: High to Low",value:"priceDesc"}];ngOnInit(){this.getProducts(!0),this.getBands(),this.getTypes()}getProducts(t=!1){this.shopService.getProducts(t).subscribe(e=>{this.products=e.data,this.totalCount=e.count},e=>{console.log(e)})}getBands(){this.shopService.getBands().subscribe(t=>{this.bands=[{id:0,name:"All"},...t]},t=>{console.log(t)})}getTypes(){this.shopService.getTypes().subscribe(t=>{this.types=[{id:0,name:"All"},...t]},t=>{console.log(t)})}onBandSelected(t){let e=this.shopService.getShopParams();e.bandId=t,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onTypeSelected(t){let e=this.shopService.getShopParams();e.typeId=t,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onSortSelected(t){let e=this.shopService.getShopParams();e.sort=t,this.shopService.setShopParams(e),this.getProducts()}onPageChange(t){let e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}onSearch(){let t=this.shopService.getShopParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.shopService.setShopParams(t),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new x,this.shopService.setShopParams(this.shopParams),this.getProducts()}static \u0275fac=function(e){return new(e||i)(_(I))};static \u0275cmp=h({type:i,selectors:[["app-shop"]],viewQuery:function(e,n){if(e&1&&te(Oe,5),e&2){let p;ie(p=ne())&&(n.searchTerm=p.first)}},standalone:!1,decls:11,vars:7,consts:[["search",""],[1,"container","mt-3","shop-container"],[1,"row"],[1,"col-3","shop-sidebar"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],["class","d-flex align-items-center",4,"ngIf"],["class","col-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"shop-sidebar-heading","ml-3","mt-4","mb-3"],[1,"custom-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"shop-sidebar-heading","ml-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"click","value"],[1,"d-flex","align-items-center"],["placeholder","Search","type","text",1,"form-control","me-2",2,"width","300px",3,"keyup.enter"],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-primary","ms-2","my-2","shop-reset-button",3,"click"],[1,"col-3","mb-4"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"pageChanged","pageSize","totalCount","pageNumber"]],template:function(e,n){e&1&&(o(0,"div",1)(1,"div",2)(2,"section",3),g(3,Be,13,3,"ng-container",4),r(),o(4,"section",5)(5,"div",6),S(6,"app-paging-header",7),g(7,ze,7,0,"div",8),r(),o(8,"div",2),g(9,De,2,1,"div",9),r(),g(10,Ve,2,3,"div",10),r()()()),e&2&&(a(3),c("ngIf",n.types&&n.bands),a(3),c("totalCount",n.totalCount)("pageSize",n.shopParams.pageSize)("pageNumber",n.shopParams.pageNumber),a(),c("ngIf",n.products),a(2),c("ngForOf",n.products),a(),c("ngIf",n.totalCount>0))},dependencies:[re,y,j,R,ge,he,H],styles:[".shop-sidebar-heading[_ngcontent-%COMP%]{color:#921611}.shop-reset-button[_ngcontent-%COMP%]{color:#921611;border-color:#921611}.shop-reset-button[_ngcontent-%COMP%]:hover{background-color:#921611;color:#fff}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#535151;border-radius:10px}.shop-container[_ngcontent-%COMP%], .shop-sidebar[_ngcontent-%COMP%]{padding-left:30px!important;padding-right:30px!important}"]})};function je(i,t){if(i&1){let e=b();o(0,"div",2)(1,"div",3),S(2,"img",4),r(),o(3,"div",3)(4,"h3"),s(5),r(),o(6,"p",5),s(7),E(8,"currency"),r(),o(9,"div",6)(10,"i",7),l("click",function(){d(e);let p=m();return u(p.decrementQuantity())}),r(),o(11,"span",8),s(12),r(),o(13,"i",9),l("click",function(){d(e);let p=m();return u(p.incrementQuantity())}),r(),o(14,"button",10),l("click",function(){d(e);let p=m();return u(p.addItemToBasket())}),s(15,"Add to Cart"),r()()(),o(16,"div",11)(17,"div",12)(18,"h4"),s(19,"Description"),r(),o(20,"p"),s(21),r()()()()}if(i&2){let e=m();a(2),P("src",e.product.pictureUrl,O),P("alt",e.product.name),a(3),f(e.product.name),a(2),f(B(8,6,e.product.price)),a(5),f(e.quantity),a(9),f(e.product.description)}}var U=class i{constructor(t,e,n,p){this.shopService=t;this.activateRoute=e;this.bcService=n;this.basketService=p;this.bcService.set("@productDetails","")}product;quantity=1;ngOnInit(){this.loadProduct()}addItemToBasket(){this.basketService.addItemToBasket(this.product,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}loadProduct(){let t=+(this.activateRoute.snapshot.paramMap.get("id")??1);this.shopService.getProduct(t).subscribe(e=>{this.product=e,this.bcService.set("@productDetails",e.name)},e=>{console.log(e)})}static \u0275fac=function(e){return new(e||i)(_(I),_(ce),_(_e),_(D))};static \u0275cmp=h({type:i,selectors:[["app-product-details"]],standalone:!1,decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold","quantity-number",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","add-to-cart-button",3,"click"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(e,n){e&1&&(o(0,"div",0),g(1,je,22,8,"div",1),r()),e&2&&(a(),c("ngIf",n.product))},dependencies:[y,z],styles:[".quantity-number[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.add-to-cart-button[_ngcontent-%COMP%]{margin-left:20px}"]})};var Fe=[{path:"",component:A},{path:":id",component:U,data:{breadcrumb:{alias:"productDetails"}}}],q=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=M({type:i});static \u0275inj=T({imports:[$.forChild(Fe),$]})};var be=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=M({type:i});static \u0275inj=T({imports:[ae,ve,q]})};export{be as ShopModule};
