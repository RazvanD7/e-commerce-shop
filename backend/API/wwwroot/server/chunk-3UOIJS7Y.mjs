import './polyfills.server.mjs';
import{a as g}from"./chunk-YEVRXZP6.mjs";import{$b as c,A as d,D as m,_b as u,g as e,i as h,j as i}from"./chunk-27Z4IK5P.mjs";import{h as n}from"./chunk-S6KH3LOX.mjs";var p=class{bandId=0;typeId=0;sort="name";pageNumber=1;pageSize=12;search};var o=class{pageIndex;pageSize;count;data=[]};var P=class a{constructor(r){this.http=r}baseUrl=g.apiUrl;products=[];brands=[];types=[];pagination=new o;shopParams=new p;getProducts(r){if(r===!1&&(this.products=[]),this.products.length>0&&r===!0){let s=Math.ceil(this.products.length/this.shopParams.pageSize);if(this.shopParams.pageNumber<=s)return this.pagination.data=this.products.slice((this.shopParams.pageNumber-1)*this.shopParams.pageSize,this.shopParams.pageNumber*this.shopParams.pageSize),e(this.pagination)}let t=new u;return this.shopParams.bandId!==0&&(t=t.append("bandId",this.shopParams.bandId.toString())),this.shopParams.typeId!==0&&(t=t.append("typeId",this.shopParams.typeId.toString())),this.shopParams.search&&(t=t.append("search",this.shopParams.search)),t=t.append("sort",this.shopParams.sort),t=t.append("pageIndex",this.shopParams.pageNumber.toString()),t=t.append("pageIndex",this.shopParams.pageSize.toString()),this.http.get(this.baseUrl+"products",{observe:"response",params:t}).pipe(i(s=>(this.products=[...this.products,...s.body.data],this.pagination=s.body,this.pagination)))}getProduct(r){let t=this.products.find(s=>s.id===r);return t?e(t):this.http.get(this.baseUrl+"products/"+r)}setShopParams(r){this.shopParams=r}getShopParams(){return this.shopParams}getBands(){return this.brands.length>0?e(this.brands):this.http.get(this.baseUrl+"products/bands").pipe(i(r=>(this.brands=r,r)))}getTypes(){return this.types.length>0?e(this.types):this.http.get(this.baseUrl+"products/types").pipe(i(r=>(this.types=r,r)))}getAllProductIds(){return n(this,null,function*(){return(yield h(this.http.get(`${this.baseUrl}products/ids`))).map(t=>t.toString())})}static \u0275fac=function(t){return new(t||a)(m(c))};static \u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a,P as b};
