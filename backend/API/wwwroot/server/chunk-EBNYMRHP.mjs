import './polyfills.server.mjs';
import{$a as M,A,Ba as h,Ca as g,D as I,Ea as f,Fa as _,Fb as N,Ga as x,Gb as W,Hb as H,Jb as V,Kb as z,La as l,Ob as J,Qa as $,Sa as G,Ta as Q,Va as C,Wa as B,c as S,cb as R,db as q,ea as o,eb as X,fa as T,ic as K,j as O,ja as E,jc as L,la as D,mc as U,n as j,na as k,nc as Y,pc as Z,qa as b,wa as w,xa as c}from"./chunk-27Z4IK5P.mjs";import{a as s,b as p}from"./chunk-S6KH3LOX.mjs";var re=n=>({"xng-breadcrumb-link-disabled":n}),te=(n,u,e,t,r,i)=>({$implicit:n,info:u,last:e,first:t,index:r,count:i});function ne(n,u){n&1&&x(0)}function ie(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(2).$implicit;o(),B(e.label)}}function ae(n,u){if(n&1&&(h(0,"a",7),b(1,ne,1,0,"ng-container",8)(2,ie,2,1,"ng-container",9),g()),n&2){let e=l(),t=e.$implicit,r=e.last,i=e.first,a=e.index,d=e.count,m=l();c("ngClass",M(10,re,t.disable))("routerLink",t.routeInterceptor?t.routeInterceptor(t.routeLink,t):t.routeLink)("queryParams",m.preserveQueryParams?t.queryParams:void 0)("fragment",m.preserveFragment?t.fragment:void 0)("target",m.anchorTarget?m.anchorTarget:"_self"),w("aria-disabled",t.disable)("tabIndex",t.disable?-1:0),o(),c("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(12,te,t.label,t.info,r,i,a,d)),o(),c("ngIf",!m.itemTemplate)}}function se(n,u){n&1&&x(0)}function oe(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(2).$implicit;o(),B(e.label)}}function ce(n,u){if(n&1&&(h(0,"span",10),b(1,se,1,0,"ng-container",8)(2,oe,2,1,"ng-container",9),g()),n&2){let e=l(),t=e.$implicit,r=e.last,i=e.first,a=e.index,d=e.count,m=l();o(),c("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(3,te,t.label,t.info,r,i,a,d)),o(),c("ngIf",!m.itemTemplate)}}function ue(n,u){n&1&&x(0)}function me(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(3);o(),B(e.separator)}}function le(n,u){if(n&1&&(h(0,"li",11),b(1,ue,1,0,"ng-container",12)(2,me,2,1,"ng-container",9),g()),n&2){let e=l(2);o(),c("ngTemplateOutlet",e.separatorTemplate),o(),c("ngIf",!e.separatorTemplate)}}function de(n,u){if(n&1&&(f(0),h(1,"li",3),b(2,ae,3,19,"a",4)(3,ce,3,10,"span",5),g(),b(4,le,3,2,"li",6),_()),n&2){let e=u.last;o(2),c("ngIf",!e),o(),c("ngIf",e),o(),c("ngIf",!e)}}var pe=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=k({type:n,selectors:[["","xngBreadcrumbItem",""]]})}}return n})(),y={PREFIX:":",REGEX_IDENTIFIER:"/:[^/]+",REGEX_REPLACER:"/[^/]+"},be="@",ee=n=>!!n&&Object.keys(n).length>0,he=(()=>{class n{constructor(e,t){this.activatedRoute=e,this.router=t,this.baseHref="/",this.dynamicBreadcrumbStore=[],this.currentBreadcrumbs=[],this.previousBreadcrumbs=[],this.breadcrumbs=new S([]),this.breadcrumbs$=this.breadcrumbs.asObservable(),this.detectRouteChanges()}detectRouteChanges(){this.setupBreadcrumbs(this.activatedRoute.snapshot),this.router.events.pipe(j(e=>e instanceof K)).subscribe(e=>{e.shouldActivate&&this.setupBreadcrumbs(e.state.root)})}setupBreadcrumbs(e){this.previousBreadcrumbs=this.currentBreadcrumbs;let t=this.getRootBreadcrumb();this.currentBreadcrumbs=t?[t]:[],this.prepareBreadcrumbList(e,this.baseHref)}getRootBreadcrumb(){let e=this.router.config.find(i=>i.path===""),t=this.extractObject(e?.data?.breadcrumb),r=this.getFromStore(t.alias,"/");if(ee(t)||ee(r))return s(p(s(s({},r),t),{routeLink:this.baseHref}),this.getQueryParamsFromPreviousList("/"))}prepareBreadcrumbItem(e,t){let{path:r,breadcrumb:i}=this.parseRouteData(e.routeConfig),a=this.resolvePathSegment(r,e),d=`${t}${a}`,m=this.getFromStore(i.alias,d),P=this.extractLabel(m?.label||i?.label,a),v=!1,F="";return P||(v=!0,F=a),s(p(s(s({},m),i),{label:v?F:P,routeLink:d,isAutoGeneratedLabel:v}),this.getQueryParamsFromPreviousList(d))}prepareBreadcrumbList(e,t){if(e.routeConfig?.path){let a=this.prepareBreadcrumbItem(e,t);if(this.currentBreadcrumbs.push(a),e.firstChild)return this.prepareBreadcrumbList(e.firstChild,a.routeLink+"/")}else if(e.firstChild)return this.prepareBreadcrumbList(e.firstChild,t);let r=this.currentBreadcrumbs[this.currentBreadcrumbs.length-1];this.setQueryParamsForActiveBreadcrumb(r,e);let i=this.currentBreadcrumbs.filter(a=>!a.skip);this.breadcrumbs.next(i)}getFromStore(e,t){return this.dynamicBreadcrumbStore.find(r=>e&&e===r.alias||t&&t===r.routeLink||this.matchRegex(t,r.routeRegex))}matchRegex(e,t){return e.match(new RegExp(t))?.[0]===e}resolvePathSegment(e,t){return e.includes(y.PREFIX)&&Object.entries(t.params).forEach(([r,i])=>{e=e.replace(`:${r}`,`${i}`)}),e}getQueryParamsFromPreviousList(e){let{queryParams:t,fragment:r}=this.previousBreadcrumbs.find(i=>i.routeLink===e)||{};return{queryParams:t,fragment:r}}setQueryParamsForActiveBreadcrumb(e,t){if(e){let{queryParams:r,fragment:i}=t;e.queryParams=r?s({},r):void 0,e.fragment=i}}parseRouteData(e){let{path:t,data:r}=e,i=this.mergeWithBaseChildData(e,r?.breadcrumb);return{path:t,breadcrumb:i}}mergeWithBaseChildData(e,t){if(!e)return this.extractObject(t);let r;e.loadChildren?r=e._loadedRoutes.find(a=>a.path===""):e.children&&(r=e.children.find(a=>a.path===""));let i=r?.data?.breadcrumb;return i?this.mergeWithBaseChildData(r,s(s({},this.extractObject(t)),this.extractObject(i))):this.extractObject(t)}set(e,t){let r=this.extractObject(t),i;e.startsWith(be)?i=["alias",p(s({},r),{alias:e.slice(1)})]:e.includes(y.PREFIX)?i=["routeRegex",p(s({},r),{routeRegex:this.buildRegex(e)})]:i=["routeLink",p(s({},r),{routeLink:this.ensureLeadingSlash(e)})],i[1].isAutoGeneratedLabel=!1,this.updateStore(...i),this.updateCurrentBreadcrumbs(...i)}updateStore(e,t){let r=this.dynamicBreadcrumbStore.findIndex(i=>t[e]===i[e]);r>-1?this.dynamicBreadcrumbStore[r]=s(s({},this.dynamicBreadcrumbStore[r]),t):this.dynamicBreadcrumbStore.push(s({},t))}updateCurrentBreadcrumbs(e,t){let r=this.currentBreadcrumbs.findIndex(i=>e==="routeRegex"?this.matchRegex(i.routeLink,t[e]):t[e]===i[e]);if(r>-1){this.currentBreadcrumbs[r]=s(s({},this.currentBreadcrumbs[r]),t);let i=this.currentBreadcrumbs.filter(a=>!a.skip);this.breadcrumbs.next([...i])}}buildRegex(e){return this.ensureLeadingSlash(e).replace(new RegExp(y.REGEX_IDENTIFIER,"g"),y.REGEX_REPLACER)}ensureLeadingSlash(e){return e.startsWith("/")?e:`/${e}`}extractLabel(e,t){let r=typeof e=="object"?e.label:e;return typeof r=="function"?r(t):r}extractObject(e){return e&&(typeof e=="string"||typeof e=="function")?{label:e}:e||{}}static{this.\u0275fac=function(t){return new(t||n)(I(L),I(U))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fe=(()=>{class n{set separator(e){e instanceof T?(this.separatorTemplate=e,this._separator=void 0):(this.separatorTemplate=void 0,this._separator=e||"/")}get separator(){return this._separator}constructor(e,t){this.breadcrumbService=e,this._separator="/",this.autoGenerate=!0,this.preserveQueryParams=!0,this.preserveFragment=!0,this.class="",this.setupMessage="not set up yet",this.someParameterValue=null,t.params.subscribe(r=>{this.setupComponent(r.someParam)})}setupComponent(e){this.setupMessage="set up at "+new Date,this.someParameterValue=e}ngOnInit(){this.breadcrumbs$=this.breadcrumbService.breadcrumbs$.pipe(O(e=>e.filter(t=>this.autoGenerate?!0:!t.isAutoGeneratedLabel).map(t=>{let{routeInterceptor:r,routeLink:i}=t;return p(s({},t),{routeLink:r?.(i,t)||i})})))}static{this.\u0275fac=function(t){return new(t||n)(E(he),E(L))}}static{this.\u0275cmp=D({type:n,selectors:[["xng-breadcrumb"]],contentQueries:function(t,r,i){if(t&1&&$(i,pe,5,T),t&2){let a;G(a=Q())&&(r.itemTemplate=a.first)}},inputs:{autoGenerate:"autoGenerate",preserveQueryParams:"preserveQueryParams",preserveFragment:"preserveFragment",class:"class",anchorTarget:"anchorTarget",separator:"separator"},decls:4,vars:4,consts:[["aria-label","breadcrumb",1,"xng-breadcrumb-root",3,"ngClass"],[1,"xng-breadcrumb-list"],[4,"ngFor","ngForOf"],[1,"xng-breadcrumb-item"],["class","xng-breadcrumb-link","rel","noopener noreferrer",3,"ngClass","routerLink","queryParams","fragment","target",4,"ngIf"],["class","xng-breadcrumb-trail",4,"ngIf"],["class","xng-breadcrumb-separator","aria-hidden","true",4,"ngIf"],["rel","noopener noreferrer",1,"xng-breadcrumb-link",3,"ngClass","routerLink","queryParams","fragment","target"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"xng-breadcrumb-trail"],["aria-hidden","true",1,"xng-breadcrumb-separator"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&(h(0,"nav",0)(1,"ol",1),b(2,de,5,3,"ng-container",2),q(3,"async"),g()()),t&2&&(c("ngClass",r.class),o(2),c("ngForOf",X(3,2,r.breadcrumbs$)))},dependencies:[J,N,W,H,V,z,Z,Y],styles:[`.xng-breadcrumb-root{margin:0}.xng-breadcrumb-list{display:flex;align-items:center;flex-wrap:wrap;margin:0;padding:0}.xng-breadcrumb-item{list-style:none}.xng-breadcrumb-trail{display:flex;align-items:center}.xng-breadcrumb-link{display:flex;align-items:center;white-space:nowrap;color:inherit;text-decoration:none;transition:text-decoration .3s;cursor:pointer}.xng-breadcrumb-link:hover{text-decoration:underline}.xng-breadcrumb-link-disabled{pointer-events:none;cursor:disabled}.xng-breadcrumb-separator{display:flex;-webkit-user-select:none;user-select:none;margin-left:8px;margin-right:8px}
`],encapsulation:2})}}return n})();export{he as a,Fe as b};
