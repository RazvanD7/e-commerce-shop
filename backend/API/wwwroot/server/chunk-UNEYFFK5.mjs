import './polyfills.server.mjs';
import{a as se,b as N}from"./chunk-3UOIJS7Y.mjs";import{a as E}from"./chunk-MEPAJXVD.mjs";import{a as te}from"./chunk-EBNYMRHP.mjs";import{D as oe,E as re,G as ae,M as pe,t as ne,x as ie}from"./chunk-YEVRXZP6.mjs";import{B as P,Ba as o,Ca as r,Da as S,Ea as $,Fa as U,Gb as X,Ha as C,Hb as y,J as d,K as u,Ka as l,La as m,N as Q,Nb as M,Oa as b,Ob as Y,Pa as q,Ra as G,Sa as J,Ta as K,Va as p,Wa as h,Xa as k,Ya as W,da as I,db as O,ea as a,eb as T,ja as v,jc as Z,la as f,ma as w,nc as ee,pc as L,qa as g,xa as c,za as A}from"./chunk-27Z4IK5P.mjs";import"./chunk-S6KH3LOX.mjs";function me(n,t){if(n&1&&(o(0,"span"),p(1,"Showing "),o(2,"strong"),p(3),r(),p(4," of "),o(5,"strong"),p(6),r(),p(7," Results"),r()),n&2){let e=m();a(3),W(" ",(e.pageNumber-1)*e.pageSize+1," - ",e.pageNumber*e.pageSize>e.totalCount?e.totalCount:e.pageNumber*e.pageSize," "),a(3),h(e.totalCount)}}function le(n,t){n&1&&(o(0,"span"),p(1," There are "),o(2,"strong"),p(3,"0"),r(),p(4," results for this filter "),r())}var D=class n{pageNumber;pageSize;totalCount;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},standalone:!1,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(e,i){e&1&&(o(0,"header"),g(1,me,8,3,"span",0)(2,le,5,0,"span",0),r()),e&2&&(a(),c("ngIf",i.totalCount&&i.totalCount>0),a(),c("ngIf",i.totalCount===0))},dependencies:[y],encapsulation:2})};var V=class n{totalCount;pageSize;pageNumber;pageChanged=new Q;constructor(){}ngOnInit(){}onPagerChange(t){this.pageChanged.emit(t.page)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},standalone:!1,decls:1,vars:4,consts:[["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"pageChanged","boundaryLinks","totalItems","ngModel","itemsPerPage"]],template:function(e,i){e&1&&(o(0,"pagination",0),l("pageChanged",function(_){return i.onPagerChange(_)}),r()),e&2&&c("boundaryLinks",!0)("totalItems",i.totalCount)("ngModel",i.pageNumber)("itemsPerPage",i.pageSize)},dependencies:[ae,ne,ie],encapsulation:2})};var z=class n{constructor(t){this.basketService=t}product;ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}static \u0275fac=function(e){return new(e||n)(v(E))};static \u0275cmp=f({type:n,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!1,decls:15,vars:10,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-shopping-cart"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),S(2,"img",2),o(3,"div",3)(4,"button",4),l("click",function(){return i.addItemToBasket()}),S(5,"i",5),r(),o(6,"button",6),p(7," View "),r()()(),o(8,"div",7)(9,"a",8)(10,"h6",9),p(11),r()(),o(12,"span",10),p(13),O(14,"currency"),r()()()),e&2&&(a(2),b("src",i.product.pictureUrl,I),b("alt",i.product.name),a(4),q("routerLink","/shop/",i.product.id,""),a(3),q("routerLink","/shop/",i.product.id,""),a(2),h(i.product.name),a(2),h(T(14,8,i.product.price)))},dependencies:[ee,M],styles:[".btn[_ngcontent-%COMP%]{height:40px;padding:0 1rem;display:flex;align-items:center;justify-content:center;min-width:80px;line-height:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#ffffff80;opacity:0;transition:all .5s;display:flex;align-items:center;justify-content:center;gap:1.5rem;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]{opacity:1}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-of-type{transform:translate(7px)}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:last-of-type{transform:translate(-7px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transition:all .5s;z-index:1000}"]})};var Se=["search"];function Ce(n,t){if(n&1&&(o(0,"option",17),p(1),r()),n&2){let e=t.$implicit,i=m(2);c("selected",i.shopParams.sort===e.value)("value",e.value),a(),k(" ",e.name," ")}}function be(n,t){if(n&1){let e=C();o(0,"li",18),l("click",function(){let s=d(e).$implicit,_=m(2);return u(_.onTypeSelected(s.id))}),p(1),r()}if(n&2){let e=t.$implicit,i=m(2);A("active",e.id===i.shopParams.typeId),c("value",e.id),a(),k(" ",e.name," ")}}function ye(n,t){if(n&1){let e=C();o(0,"li",18),l("click",function(){let s=d(e).$implicit,_=m(2);return u(_.onBandSelected(s.id))}),p(1),r()}if(n&2){let e=t.$implicit,i=m(2);A("active",e.id===i.shopParams.bandId),c("value",e.id),a(),k(" ",e.name," ")}}function xe(n,t){if(n&1){let e=C();$(0),o(1,"h5",11),p(2,"Sort"),r(),o(3,"select",12),l("change",function(s){d(e);let _=m();return u(_.onSortSelected(s.target.value))}),g(4,Ce,2,3,"option",13),r(),o(5,"h5",14),p(6,"Types"),r(),o(7,"ul",15),g(8,be,2,4,"li",16),r(),o(9,"h5",14),p(10,"Bands"),r(),o(11,"ul",15),g(12,ye,2,4,"li",16),r(),U()}if(n&2){let e=m();a(4),c("ngForOf",e.sortOptions),a(4),c("ngForOf",e.types),a(4),c("ngForOf",e.bands)}}function Pe(n,t){if(n&1){let e=C();o(0,"div",19)(1,"input",20,0),l("keyup.enter",function(){d(e);let s=m();return u(s.onSearch())}),r(),o(3,"button",21),l("click",function(){d(e);let s=m();return u(s.onSearch())}),p(4,"Search"),r(),o(5,"button",22),l("click",function(){d(e);let s=m();return u(s.onReset())}),p(6,"Reset"),r()()}}function Ie(n,t){if(n&1&&(o(0,"div",23),S(1,"app-product-item",24),r()),n&2){let e=t.$implicit;a(),c("product",e)}}function we(n,t){if(n&1){let e=C();o(0,"div",25)(1,"app-pager",26),l("pageChanged",function(s){d(e);let _=m();return u(_.onPageChange(s))}),r()()}if(n&2){let e=m();a(),c("pageSize",e.shopParams.pageSize)("totalCount",e.totalCount)("pageNumber",e.shopParams.pageNumber)}}var j=class n{constructor(t){this.shopService=t;this.shopParams=this.shopService.getShopParams()}searchTerm;products;bands;types;shopParams;totalCount;sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to High",value:"priceAsc"},{name:"Price: High to Low",value:"priceDesc"}];ngOnInit(){this.getProducts(!0),this.getBands(),this.getTypes()}getProducts(t=!1){this.shopService.getProducts(t).subscribe(e=>{this.products=e.data,this.totalCount=e.count},e=>{console.log(e)})}getBands(){this.shopService.getBands().subscribe(t=>{this.bands=[{id:0,name:"All"},...t]},t=>{console.log(t)})}getTypes(){this.shopService.getTypes().subscribe(t=>{this.types=[{id:0,name:"All"},...t]},t=>{console.log(t)})}onBandSelected(t){let e=this.shopService.getShopParams();e.bandId=t,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onTypeSelected(t){let e=this.shopService.getShopParams();e.typeId=t,e.pageNumber=1,this.shopService.setShopParams(e),this.getProducts()}onSortSelected(t){let e=this.shopService.getShopParams();e.sort=t,this.shopService.setShopParams(e),this.getProducts()}onPageChange(t){let e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}onSearch(){let t=this.shopService.getShopParams();t.search=this.searchTerm.nativeElement.value,t.pageNumber=1,this.shopService.setShopParams(t),this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new se,this.shopService.setShopParams(this.shopParams),this.getProducts()}static \u0275fac=function(e){return new(e||n)(v(N))};static \u0275cmp=f({type:n,selectors:[["app-shop"]],viewQuery:function(e,i){if(e&1&&G(Se,5),e&2){let s;J(s=K())&&(i.searchTerm=s.first)}},standalone:!1,decls:11,vars:7,consts:[["search",""],[1,"container","mt-3","shop-container"],[1,"row"],[1,"col-3","shop-sidebar"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],["class","d-flex align-items-center",4,"ngIf"],["class","col-3 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"shop-sidebar-heading","ml-3","mt-4","mb-3"],[1,"custom-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"shop-sidebar-heading","ml-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"click","value"],[1,"d-flex","align-items-center"],["placeholder","Search","type","text",1,"form-control","me-2",2,"width","300px",3,"keyup.enter"],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-primary","ms-2","my-2","shop-reset-button",3,"click"],[1,"col-3","mb-4"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"pageChanged","pageSize","totalCount","pageNumber"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"section",3),g(3,xe,13,3,"ng-container",4),r(),o(4,"section",5)(5,"div",6),S(6,"app-paging-header",7),g(7,Pe,7,0,"div",8),r(),o(8,"div",2),g(9,Ie,2,1,"div",9),r(),g(10,we,2,3,"div",10),r()()()),e&2&&(a(3),c("ngIf",i.types&&i.bands),a(3),c("totalCount",i.totalCount)("pageSize",i.shopParams.pageSize)("pageNumber",i.shopParams.pageNumber),a(),c("ngIf",i.products),a(2),c("ngForOf",i.products),a(),c("ngIf",i.totalCount>0))},dependencies:[X,y,D,V,oe,re,z],styles:[".shop-sidebar-heading[_ngcontent-%COMP%]{color:#921611}.shop-reset-button[_ngcontent-%COMP%]{color:#921611;border-color:#921611}.shop-reset-button[_ngcontent-%COMP%]:hover{background-color:#921611;color:#fff}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#535151;border-radius:10px}.shop-container[_ngcontent-%COMP%], .shop-sidebar[_ngcontent-%COMP%]{padding-left:30px!important;padding-right:30px!important}"]})};function ke(n,t){if(n&1){let e=C();o(0,"div",2)(1,"div",3),S(2,"img",4),r(),o(3,"div",3)(4,"h3"),p(5),r(),o(6,"p",5),p(7),O(8,"currency"),r(),o(9,"div",6)(10,"i",7),l("click",function(){d(e);let s=m();return u(s.decrementQuantity())}),r(),o(11,"span",8),p(12),r(),o(13,"i",9),l("click",function(){d(e);let s=m();return u(s.incrementQuantity())}),r(),o(14,"button",10),l("click",function(){d(e);let s=m();return u(s.addItemToBasket())}),p(15,"Add to Cart"),r()()(),o(16,"div",11)(17,"div",12)(18,"h4"),p(19,"Description"),r(),o(20,"p"),p(21),r()()()()}if(n&2){let e=m();a(2),b("src",e.product.pictureUrl,I),b("alt",e.product.name),a(3),h(e.product.name),a(2),h(T(8,6,e.product.price)),a(5),h(e.quantity),a(9),h(e.product.description)}}var F=class n{constructor(t,e,i,s){this.shopService=t;this.activateRoute=e;this.bcService=i;this.basketService=s;this.bcService.set("@productDetails","")}product;quantity=1;ngOnInit(){this.loadProduct()}addItemToBasket(){this.basketService.addItemToBasket(this.product,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}loadProduct(){let t=+(this.activateRoute.snapshot.paramMap.get("id")??1);this.shopService.getProduct(t).subscribe(e=>{this.product=e,this.bcService.set("@productDetails",e.name)},e=>{console.log(e)})}static \u0275fac=function(e){return new(e||n)(v(N),v(Z),v(te),v(E))};static \u0275cmp=f({type:n,selectors:[["app-product-details"]],standalone:!1,decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold","quantity-number",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","add-to-cart-button",3,"click"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(e,i){e&1&&(o(0,"div",0),g(1,ke,22,8,"div",1),r()),e&2&&(a(),c("ngIf",i.product))},dependencies:[y,M],styles:[".quantity-number[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:30px}.add-to-cart-button[_ngcontent-%COMP%]{margin-left:20px}"]})};var Oe=[{path:"",component:j},{path:":id",component:F,data:{breadcrumb:{alias:"productDetails"}}}],R=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=w({type:n});static \u0275inj=P({imports:[L.forChild(Oe),L]})};var ce=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=w({type:n});static \u0275inj=P({imports:[Y,pe,R]})};export{ce as ShopModule};
